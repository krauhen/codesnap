= Codesnap
:toc: left
:toc-title: Table of Contents
:toclevels: 3
:icons: font
:source-highlighter: rouge
:experimental:

image:https://img.shields.io/badge/python-3.13+-blue.svg[Python 3.13+, link=https://www.python.org/downloads/]
image:https://img.shields.io/badge/License-MIT-yellow.svg[License: MIT, link=https://opensource.org/licenses/MIT]

Generate LLM-friendly code snapshots with smart filtering and clipboard support.

== Overview

Codesnap is a command-line tool designed to create clean, structured snapshots of your codebase optimized for use with Large Language Models (LLMs). It intelligently filters out noise like build artifacts and dependencies while preserving the important context needed for AI-assisted development.

=== Key Features

* üéØ *Smart Language Detection* - Automatically detects JavaScript, TypeScript, and Python projects
* üßπ *Intelligent Filtering* - Excludes build artifacts, caches, and dependencies by default
* üìã *Clipboard Integration* - Copy snapshots directly to clipboard on macOS, Linux, and Windows
* üî¢ *Token Awareness* - Limit output size to fit within LLM context windows
* ‚öôÔ∏è *Highly Configurable* - Customize ignore patterns, file extensions, and more
* üìÅ *Project Structure* - Includes directory tree visualization for better context

== Installation

=== Using uv (Recommended)

[source,bash]
----
uv pip install codesnap
----

=== Using pip

[source,bash]
----
pip install codesnap
----

=== From Source

[source,bash]
----
git clone https://github.com/henningkrause/codesnap.git
cd codesnap
uv pip install -e .
----

== Quick Start

[source,bash]
----
# Snapshot current directory to clipboard
codesnap -c

# Snapshot a specific project to clipboard
codesnap ~/projects/my-app -c

# Save snapshot to file
codesnap -o snapshot.md

# Limit tokens for GPT-4
codesnap -c --max-tokens 8000
----

== Command Line Usage

=== Basic Syntax

[source,bash]
----
codesnap [OPTIONS] [PATH]
----

=== Arguments

[cols="1,3"]
|===
|Argument |Description

|`PATH`
|Project root path (default: current directory)
|===

=== Options

[cols="2,1,4"]
|===
|Option |Short |Description

|`--language`
|`-l`
|Project language: `javascript`, `typescript`, or `python` (auto-detected if not specified)

|`--clipboard`
|`-c`
|Copy output to clipboard instead of stdout

|`--output`
|`-o`
|Output file path (stdout if not specified)

|`--config-file`
|`-f`
|Path to configuration file

|`--max-tokens`
|
|Maximum tokens to include in output

|`--no-tree`
|
|Skip directory tree visualization

|`--ignore`
|
|Additional ignore patterns (can be used multiple times)

|`--include-ext`
|
|Additional file extensions to include (can be used multiple times)

|`--version`
|
|Show version information

|`--help`
|
|Show help message
|===

== Usage Examples

=== Basic Usage

.Auto-detect language and copy to clipboard
[source,bash]
----
codesnap -c
----

.Snapshot a specific directory
[source,bash]
----
codesnap ~/projects/my-typescript-app -c
----

.Specify language explicitly
[source,bash]
----
codesnap -l python -c
----

=== Output Options

.Save to file
[source,bash]
----
codesnap -o project-snapshot.md
----

.Copy to clipboard with success message
[source,bash]
----
$ codesnap -c
‚úì Code snapshot copied to clipboard
  Characters: 15,234
  Files included: 23
  Approximate tokens: 4,521
----

=== Token Limiting

.Limit output for GPT-4 (8K context)
[source,bash]
----
codesnap -c --max-tokens 8000
----

.Limit output for Claude (100K context)
[source,bash]
----
codesnap -c --max-tokens 100000
----

=== Custom Filtering

.Ignore test files
[source,bash]
----
codesnap -c --ignore "*.test.js" --ignore "__tests__/"
----

.Include additional file types
[source,bash]
----
codesnap -c --include-ext ".env.example" --include-ext ".dockerfile"
----

.Multiple filters
[source,bash]
----
codesnap -c \
  --ignore "*.test.ts" \
  --ignore "*.spec.ts" \
  --ignore "docs/" \
  --include-ext ".sql" \
  --include-ext ".graphql"
----

=== Configuration File

.Use a configuration file
[source,bash]
----
codesnap -c -f .codesnap.json
----

.Skip directory tree
[source,bash]
----
codesnap -c --no-tree
----

== Configuration

You can create a `.codesnap.json` file in your project root to persist configuration:

[source,json]
----
{
  "ignore": [
    "*.test.js",
    "*.spec.js",
    "docs/",
    "examples/"
  ],
  "include_extensions": [
    ".config.js",
    ".env.example"
  ],
  "whitelist": [
    "src/**/*.ts",
    "src/**/*.tsx",
    "package.json",
    "tsconfig.json"
  ],
  "max_file_lines": 500
}
----

=== Configuration Options

[cols="2,3"]
|===
|Option |Description

|`ignore`
|Array of glob patterns for files/directories to ignore

|`include_extensions`
|Array of additional file extensions to include

|`whitelist`
|Array of glob patterns for files to explicitly include (overrides ignore)

|`max_file_lines`
|Maximum lines per file before truncation
|===

== Default Ignore Patterns

=== JavaScript/TypeScript Projects

* `node_modules/`
* `dist/`, `build/`, `out/`
* `coverage/`
* `.next/`
* `*.log`, `*.lock`
* `.env*`
* `.cache/`, `tmp/`, `temp/`
* `*.min.js`, `*.map`
* `.DS_Store`
* `.vscode/`, `.idea/`
* `*.tsbuildinfo` (TypeScript only)

=== Python Projects

* `__pycache__/`, `*.pyc`, `*.pyo`, `*.pyd`
* `venv/`, `env/`, `.venv/`
* `dist/`, `build/`
* `*.egg-info/`
* `.pytest_cache/`, `.coverage`, `htmlcov/`
* `.tox/`, `.mypy_cache/`, `.ruff_cache/`
* `*.log`
* `.DS_Store`
* `.vscode/`, `.idea/`
* `*.db`, `*.sqlite`
* `.uv/`

== Output Format

The generated snapshot includes:

. *Header* - Project name, language, and root path
. *Directory Structure* - Tree visualization of included files
. *File Contents* - Each file's content with syntax highlighting hints

.Example Output
[source,markdown]
----
# Project: my-app
Language: typescript
Root: /Users/john/projects/my-app

## Directory Structure
my-app/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Button.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Card.tsx
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ helpers.ts
‚îÇ   ‚îî‚îÄ‚îÄ index.ts
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ tsconfig.json


## File Contents

### package.json
```json
{
  "name": "my-app",
  "version": "1.0.0",
  ...
}

### src/index.ts
import { Button } from './components/Button';

export function main() {
  console.log('Hello, world!');
}

Total files: 6
Approximate tokens: 1,234
----
== Advanced Usage

=== Language Detection

Codesnap automatically detects project language based on:

.JavaScript/TypeScript

     Presence of package.json
     .ts or .tsx files indicate TypeScript
     .js or .jsx files indicate JavaScript


.Python

     Presence of requirements.txt, pyproject.toml, setup.py, or Pipfile
     .py files


=== Integration with AI Tools
.Copy to clipboard for ChatGPT
[source,bash]
codesnap -c --max-tokens 8000
# Then paste directly into ChatGPT
.Generate context file for GitHub Copilot Chat
[source,bash]
codesnap -o .github/copilot-context.md
.Create snapshot for code review
[source,bash]
codesnap -o code-review-$(date +%Y%m%d).md

== Tips and Best Practices

=== Optimize Context Window Usage

     Use --max-tokens to stay within LLM limits
     Use whitelist patterns to focus on specific parts of your codebase
     Exclude test files unless specifically debugging tests
     Remove generated files and build artifacts


=== Project-Specific Configuration

Create a .codesnap.json for each project type:
.Frontend Project
[source,json]
{
  "whitelist": ["src/**/", "package.json", "tsconfig.json"],
  "ignore": [".test.", ".spec.", ".stories.*"]
}
.Backend API
[source,json]
{
  "whitelist": ["app//*", "api//", "config/**/"],
  "ignore": ["tests/", "migrations/", "seeds/"]
}

=== Shell Aliases

Add to your .bashrc or .zshrc:
[source,bash]
Quick snapshot to clipboard

alias snap='codesnap -c'
Snapshot with token limit

alias snapgpt='codesnap -c --max-tokens 8000'
Snapshot without tree
alias snapnt='codesnap -c --no-tree'

== Troubleshooting

=== Clipboard Not Working

.macOS
Ensure pbcopy is available (included by default)
.Linux
Install xclip or xsel:
[source,bash]
Ubuntu/Debian

sudo apt-get install xclip
Fedora
sudo dnf install xclip

.Windows
Clipboard should work out of the box on Windows 10+

=== Large Projects

For very large projects:

     Use whitelist patterns to focus on specific directories
     Set --max-tokens to avoid truncation
     Use --no-tree to save space
     Consider splitting into multiple snapshots


== License

MIT License - see LICENSE file for details.

== Contributing

Contributions are welcome! Please see our https://github.com/henningkrause/codesnap/blob/main/CONTRIBUTING.md[Contributing  Guide].

== Support

     üêõ https://github.com/henningkrause/codesnap/issues[Report  bugs]
     üí° https://github.com/henningkrause/codesnap/discussions[Request  features]
     üìñ https://github.com/henningkrause/codesnap/wiki[Read  the wiki]
